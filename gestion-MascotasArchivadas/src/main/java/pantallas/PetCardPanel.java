/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package pantallas;

/**
 *
 * @author angel
 */
public class PetCardPanel extends javax.swing.JPanel {

        private String mascotaId;

        /**
         * Creates new form PetCardPanel
         */
        public PetCardPanel() {
                initComponents();
        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated
        // Code">//GEN-BEGIN:initComponents
        private void initComponents() {

                jPanel1 = new javax.swing.JPanel();
                jPanel2 = new javax.swing.JPanel();
                lbImagenMascota = new javax.swing.JLabel();
                btn_infoMascota = new javax.swing.JButton();
                lbNombreMascota = new javax.swing.JLabel();
                lblBoton3 = new javax.swing.JLabel();

                jPanel2.setBackground(new java.awt.Color(255, 255, 204));
                jPanel2.setForeground(new java.awt.Color(235, 229, 220));

                lbImagenMascota.setForeground(new java.awt.Color(0, 0, 0));
                lbImagenMascota.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
                lbImagenMascota.setText("image");

                btn_infoMascota.setBackground(new java.awt.Color(80, 172, 80));
                btn_infoMascota.setText("VER DETALLES");
                btn_infoMascota.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                btn_infoMascotaActionPerformed(evt);
                        }
                });

                lbNombreMascota.setForeground(new java.awt.Color(0, 0, 0));
                lbNombreMascota.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
                lbNombreMascota.setText("nombreMascota");

                lblBoton3.setFont(new java.awt.Font("Segoe UI", 0, 36)); // NOI18N
                lblBoton3.setForeground(new java.awt.Color(0, 0, 0));

                javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
                jPanel2.setLayout(jPanel2Layout);
                jPanel2Layout.setHorizontalGroup(
                                jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(jPanel2Layout.createSequentialGroup()
                                                                .addGroup(jPanel2Layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addGroup(jPanel2Layout
                                                                                                .createSequentialGroup()
                                                                                                .addGap(53, 53, 53)
                                                                                                .addComponent(lbImagenMascota,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                285,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                .addGroup(jPanel2Layout
                                                                                                .createSequentialGroup()
                                                                                                .addGroup(jPanel2Layout
                                                                                                                .createParallelGroup(
                                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                .addGroup(jPanel2Layout
                                                                                                                                .createSequentialGroup()
                                                                                                                                .addGap(110, 110,
                                                                                                                                                110)
                                                                                                                                .addComponent(btn_infoMascota,
                                                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                                                169,
                                                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                                                .addGroup(jPanel2Layout
                                                                                                                                .createSequentialGroup()
                                                                                                                                .addGap(96, 96, 96)
                                                                                                                                .addComponent(lbNombreMascota,
                                                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                                                205,
                                                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)))
                                                                                                .addGap(40, 40, 40)
                                                                                                .addComponent(lblBoton3)))
                                                                .addContainerGap(48, Short.MAX_VALUE)));
                jPanel2Layout.setVerticalGroup(
                                jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(jPanel2Layout.createSequentialGroup()
                                                                .addContainerGap(19, Short.MAX_VALUE)
                                                                .addComponent(lbImagenMascota,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                180,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addGap(18, 18, 18)
                                                                .addGroup(jPanel2Layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addGroup(jPanel2Layout
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(lbNombreMascota)
                                                                                                .addGap(18, 18, 18)
                                                                                                .addComponent(btn_infoMascota,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                53,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                .addComponent(lblBoton3,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                50,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addGap(91, 91, 91)));

                javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
                jPanel1.setLayout(jPanel1Layout);
                jPanel1Layout.setHorizontalGroup(
                                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(jPanel1Layout.createSequentialGroup()
                                                                .addComponent(jPanel2,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addGap(0, 0, Short.MAX_VALUE)));
                jPanel1Layout.setVerticalGroup(
                                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE));

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
                this.setLayout(layout);
                layout.setHorizontalGroup(
                                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGap(0, 389, Short.MAX_VALUE)
                                                .addGroup(layout.createParallelGroup(
                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                .addGroup(layout.createSequentialGroup()
                                                                                .addGap(0, 0, Short.MAX_VALUE)
                                                                                .addComponent(jPanel1,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addGap(0, 0, Short.MAX_VALUE))));
                layout.setVerticalGroup(
                                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGap(0, 395, Short.MAX_VALUE)
                                                .addGroup(layout.createParallelGroup(
                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                .addGroup(layout.createSequentialGroup()
                                                                                .addGap(0, 0, Short.MAX_VALUE)
                                                                                .addComponent(jPanel1,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addGap(0, 0, Short.MAX_VALUE))));
        }// </editor-fold>//GEN-END:initComponents

        private void btn_infoMascotaActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_infoMascotaActionPerformed
                // Este método se maneja vía el listener agregarListenerDetalle
        }// GEN-LAST:event_btn_infoMascotaActionPerformed

        /**
         * Establece el ID de la mascota
         */
        public void setMascotaId(String id) {
                this.mascotaId = id;
        }

        /**
         * Obtiene el ID de la mascota
         */
        public String getMascotaId() {
                return this.mascotaId;
        }

        /**
         * Establece el nombre de la mascota
         */
        public void setNombreMascota(String nombre) {
                lbNombreMascota.setText(nombre != null ? nombre : "Sin nombre");
        }

        /**
         * Establece la imagen de la mascota
         */
        public void setImagenMascota(String urlImagen) {
                try {
                        if (urlImagen == null || urlImagen.trim().isEmpty()) {
                                lbImagenMascota.setText("Sin imagen");
                                lbImagenMascota.setIcon(null);
                                return;
                        }

                        // Intentar cargar como ruta absoluta primero
                        java.io.File imageFile = new java.io.File(urlImagen);
                        javax.swing.ImageIcon icon;

                        if (imageFile.exists()) {
                                // Es ruta absoluta
                                icon = new javax.swing.ImageIcon(imageFile.getAbsolutePath());
                        } else {
                                // Intentar como recurso del classpath
                                java.net.URL resourceUrl = getClass().getClassLoader().getResource(urlImagen);
                                if (resourceUrl != null) {
                                        icon = new javax.swing.ImageIcon(resourceUrl);
                                } else {
                                        lbImagenMascota.setText("Imagen no encontrada");
                                        lbImagenMascota.setIcon(null);
                                        return;
                                }
                        }

                        // Redimensionar imagen
                        java.awt.Image img = icon.getImage();
                        java.awt.Image scaledImg = img.getScaledInstance(
                                        lbImagenMascota.getWidth() > 0 ? lbImagenMascota.getWidth() : 285,
                                        lbImagenMascota.getHeight() > 0 ? lbImagenMascota.getHeight() : 180,
                                        java.awt.Image.SCALE_SMOOTH);
                        lbImagenMascota.setIcon(new javax.swing.ImageIcon(scaledImg));
                        lbImagenMascota.setText("");

                } catch (Exception e) {
                        System.err.println("Error al cargar imagen: " + e.getMessage());
                        lbImagenMascota.setText("Error al cargar imagen");
                        lbImagenMascota.setIcon(null);
                }
        }

        /**
         * Agrega un listener al botón de detalle
         */
        public void agregarListenerDetalle(java.awt.event.ActionListener listener) {
                // Remover listeners anteriores
                for (java.awt.event.ActionListener al : btn_infoMascota.getActionListeners()) {
                        btn_infoMascota.removeActionListener(al);
                }
                // Agregar el nuevo listener
                btn_infoMascota.addActionListener(listener);
        }

        // Variables declaration - do not modify//GEN-BEGIN:variables
        private javax.swing.JButton btn_infoMascota;
        private javax.swing.JPanel jPanel1;
        private javax.swing.JPanel jPanel2;
        private javax.swing.JLabel lbImagenMascota;
        private javax.swing.JLabel lbNombreMascota;
        private javax.swing.JLabel lblBoton3;
        // End of variables declaration//GEN-END:variables
}
